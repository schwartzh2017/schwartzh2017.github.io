<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Patient Needs Survey Analysis | Haleigh Schwartz </title> <meta name="author" content="Haleigh Schwartz"> <meta name="description" content="Analyzing results from patient needs survey."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website, machine learning, python, statistics, R, data science, data analysis, healthcare analysis, data visualization, quarto"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://schwartzh2017.github.io/schwartzh2017//projects/pt_needs/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Haleigh Schwartz </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Patient Needs Survey Analysis</h1> <p class="post-description">Analyzing results from patient needs survey.</p> </header> <article> <p>To better assist New Heights Clinic patients, we asked patients to fill out a survey informing us of their needs. After collecting basic demographic information, we gathered a holistic look at patients and asked about a variety of topics, from healthcare needs to food insecurity to transportation capabilities. I used the results, along with knowledge of the clinic functions, to determine the next best steps for our team as we aim to improve understanding of and care for our patients.</p> <p>Check out the project results <a href="/assets/html/Patient_Needs_2024.html">here.</a></p> <p>See below for example code on how I imputed missing data and predicted federal poverty level.</p> <div> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w">        </span><span class="c1"># More Cleaning</span><span class="w">
        </span><span class="c1">## Impute where NA &gt; 20%</span><span class="w">
        </span><span class="c1">### Employment Status</span><span class="w">

        </span><span class="c1">#select necessary columns</span><span class="w">
        </span><span class="n">ds_emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">head_household</span><span class="p">,</span><span class="w"> </span><span class="n">marital_status</span><span class="p">,</span><span class="w"> </span><span class="n">have_ins</span><span class="p">,</span><span class="w"> </span><span class="n">employment_status</span><span class="p">)</span><span class="w">
        </span><span class="n">ds_emp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">employment_status</span><span class="p">)</span><span class="w">

        </span><span class="c1">#first understand the missing data</span><span class="w">
        </span><span class="n">aggr</span><span class="p">(</span><span class="n">ds_emp2</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s1">'navyblue'</span><span class="p">,</span><span class="s1">'red'</span><span class="p">),</span><span class="w"> </span><span class="n">numbers</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">sortVars</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">labels</span><span class="o">=</span><span class="nf">names</span><span class="p">(</span><span class="n">data</span><span class="p">),</span><span class="w"> </span><span class="n">cex.axis</span><span class="o">=</span><span class="m">.7</span><span class="p">,</span><span class="w"> </span><span class="n">gap</span><span class="o">=</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"Histogram of missing data"</span><span class="p">,</span><span class="s2">"Pattern"</span><span class="p">))</span><span class="w"> </span><span class="c1">#80% of data is complete, 95% is what we need to not impute</span><span class="w">

        </span><span class="c1">#combine with imputed pov ds to give a better estimate for imputation</span><span class="w">
        </span><span class="n">ds_emp_final</span><span class="o">=</span><span class="n">bind_cols</span><span class="p">(</span><span class="n">imp_ds_pov</span><span class="p">,</span><span class="n">ds_emp</span><span class="p">)</span><span class="w">

        </span><span class="c1">#impute with pmm method in mice to impute since both mo_income and household_size are normally distributed</span><span class="w">
        </span><span class="n">ds_emp_final_imp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mice</span><span class="p">(</span><span class="n">ds_emp_final</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="m">5</span><span class="p">,</span><span class="n">maxit</span><span class="o">=</span><span class="m">50</span><span class="p">,</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"pmm"</span><span class="p">,</span><span class="n">seed</span><span class="o">=</span><span class="m">500</span><span class="p">)</span><span class="w">
        </span><span class="n">ds_emp_final_imp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">complete</span><span class="p">(</span><span class="n">ds_emp_final_imp</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">

        
        </span><span class="c1">##################</span><span class="w">
        </span><span class="c1">##################</span><span class="w">

        </span><span class="c1"># More Cleaning</span><span class="w">
        </span><span class="c1">## Find Fed Pov Level</span><span class="w">

        </span><span class="c1">#read in and clean up poverty data. </span><span class="w">
        </span><span class="n">pov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/Users/Haleigh/Documents/NH/Reports/Demo/Fed_Pov_2024.csv"</span><span class="p">)</span><span class="w"> </span><span class="c1">#downloaded from https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines (click on "A Chart with percentages (e.g., 125 percent) of the guidelines (PDF"))</span><span class="w">

        </span><span class="n">pov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pov</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">across</span><span class="p">(</span><span class="n">ends_with</span><span class="p">(</span><span class="s2">"%"</span><span class="p">),</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">str_remove_all</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="s2">"[$,]"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">()))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">rename</span><span class="p">(</span><span class="n">household_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">`Household/\nFamily Size`</span><span class="p">)</span><span class="w">

        </span><span class="c1">###################</span><span class="w">

        </span><span class="c1"># Function to predict poverty level</span><span class="w">

        </span><span class="n">predict_poverty_level</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">household_size</span><span class="p">,</span><span class="w"> </span><span class="n">mo_income</span><span class="p">,</span><span class="w"> </span><span class="n">pov</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="c1"># If household size is NA, return NA</span><span class="w">
        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">household_size</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">is.na</span><span class="p">(</span><span class="n">mo_income</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="kc">NA</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
        
        </span><span class="c1"># Get the relevant thresholds for the household size</span><span class="w">
        </span><span class="n">thresholds</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pov</span><span class="p">[</span><span class="n">pov</span><span class="o">$</span><span class="n">household_size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">household_size</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
        
        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`25%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"25%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`50%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"50%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`75%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"75%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`100%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"100%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`125%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"125%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`130%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"130%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`133%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"133%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`135%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"135%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`138%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"138%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`150%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"150%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`175%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"175%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`180%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"180%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`185%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"185%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`200%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"200%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`225%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"225%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`250%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"250%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`275%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"275%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`300%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"300%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`325%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"325%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`350%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"350%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`375%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"375%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`400%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"400%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`500%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"500%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`600%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"600%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`700%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"700%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`800%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"800%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mo_income</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">thresholds</span><span class="o">$</span><span class="n">`1000%`</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"1000%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nf">return</span><span class="p">(</span><span class="s2">"&gt;1000%"</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">

        </span><span class="c1">##################</span><span class="w">

        </span><span class="c1">#predict</span><span class="w">
        </span><span class="n">ds_pov_pred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds_pov</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">rowwise</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">poverty_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predict_poverty_level</span><span class="p">(</span><span class="n">household_size</span><span class="p">,</span><span class="w"> </span><span class="n">mo_income</span><span class="p">,</span><span class="w"> </span><span class="n">pov</span><span class="p">))</span><span class="w">

        </span><span class="c1">#convert to numeric for easier graphing</span><span class="w">
        </span><span class="n">ds_pov_pred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds_pov_pred</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">poverty_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">str_remove_all</span><span class="p">(</span><span class="n">poverty_level</span><span class="p">,</span><span class="w"> </span><span class="s2">"%"</span><span class="p">)))</span><span class="w">

        </span><span class="c1">#add on MoE</span><span class="w">
        </span><span class="n">ds_pov_pred</span><span class="o">=</span><span class="n">ds_pov_pred</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">moe_low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poverty_level</span><span class="o">-</span><span class="p">(</span><span class="n">poverty_level</span><span class="o">*</span><span class="m">0.05</span><span class="p">),</span><span class="w">
                </span><span class="n">moe_high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poverty_level</span><span class="o">+</span><span class="p">(</span><span class="n">poverty_level</span><span class="o">*</span><span class="m">0.05</span><span class="p">))</span><span class="w">

    </span></code></pre></figure> </div> <p>NOTE: Thank you to <a href="https://www.istockphoto.com/" rel="external nofollow noopener" target="_blank">iStock by Getty Images</a> for the stock image used for this project.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2025 Haleigh Schwartz. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>