<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Medication Inventory Application | Haleigh Schwartz </title> <meta name="author" content="Haleigh Schwartz"> <meta name="description" content="App for tracking medications, dispense history, and predicting which medications to buy for Main Street Family Medicine, PLLC."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website, machine learning, python, statistics, R, data science, data analysis, healthcare analysis, data visualization, quarto"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://schwartzh2017.github.io/schwartzh2017//projects/inventory/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Haleigh Schwartz </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Medication Inventory Application</h1> <p class="post-description">App for tracking medications, dispense history, and predicting which medications to buy for Main Street Family Medicine, PLLC.</p> </header> <article> <p>In my role at <a href="https://www.mainstreetfamilymed.com/" rel="external nofollow noopener" target="_blank">Main Street Family Medicine</a>, I created an application for our nurses to keep better track of our medications stored in-house. The app also features an option to predict which medicaions would be the best to re-order at any given time. This is based on our current inventory, dispense history, and other data concerning our current patient base. The prediction feature saves our nurses time it would otherwise take them to manually determine which medications they need to order.</p> <p>Below includes a few screenshots of the app pages and the code I used to create the prediction model.</p> <p>When a user navigates to the web application, they are first prompted to enter the password (as seen below):</p> <div class="row justify-content-sm-center"> <div class="col-sm-10 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/inv1-480.webp 480w,/assets/img/inv1-800.webp 800w,/assets/img/inv1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/inv1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Login Page" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>With the correct password, the app automatically navigates to the second page, titled “Inventory Table.” The table reflects our current medication inventory along with how many times each med has been dispensed in practice history. Dispense history is an important number to have handy, as it influences our nurses’ decisions on when or if they should reorder a certain medication. The table is searchable (see right-side search bar) and can be filtered by the number of medications in stock and/or the number of times each med has been dispense (see arrows next to table column names). These functions improve the usability of the app and make it more efficient for nurses to filter information when making ordering decisions.</p> <div class="row justify-content-sm-center"> <div class="col-sm-10 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/inv2-480.webp 480w,/assets/img/inv2-800.webp 800w,/assets/img/inv2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/inv2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Inventory Table" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Finally, the last page (titled “Prediction Page”) lists the medications my model predicted we will need to order. This was based on current inventory, dispense history, previous order history, and various current patient demographic data. I included the code I used to create my model below. Also included on this page (though not in the screenshot for visability purposes) are lists of which frequently dispensed meds we are completely (and almost) out of.</p> <div class="row justify-content-sm-center"> <div class="col-sm-10 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/inv3-480.webp 480w,/assets/img/inv3-800.webp 800w,/assets/img/inv3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/inv3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Prediction Page" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The below code showcases my model for determining which meds we need to order and a summary of this process. This model was made in Python and the app in R (app code not shown).</p> <ol> <li>Preprocess data (OneHotEncoder and StandardScaler for categorical and numeric data, respectively)</li> <li>Test/train split</li> <li>Create an ensemble made of various regression models and determine which had the lowest negative mean squared error</li> <li>Hyperparameterized best model (found from previous step)</li> <li>Cross validate</li> <li>Test</li> <li>Predict</li> </ol> <div> <figure class="highlight"><pre><code class="language-python" data-lang="python">    <span class="c1"># 1. Preprocess
</span>
    <span class="c1">#standard scale all except NDC
</span>
    <span class="c1">#set up for categorical
</span>    <span class="n">encoder</span> <span class="o">=</span> <span class="nc">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="sh">'</span><span class="s">ignore</span><span class="sh">'</span><span class="p">)</span> <span class="c1">#was using ordinalencoder but problem was that there were NDCs in test that were not in training, giving me best value of nan in my model. changed to onehotencoder to prevent this
</span>    <span class="n">categorical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">NDC</span><span class="sh">"</span><span class="p">]</span>

    <span class="c1">#set up for numerical
</span>    <span class="n">std_scaler</span> <span class="o">=</span> <span class="nc">StandardScaler</span><span class="p">()</span>
    <span class="n">all_cols</span> <span class="o">=</span> <span class="n">df_final</span><span class="p">.</span><span class="n">columns</span><span class="p">.</span><span class="nf">tolist</span><span class="p">()</span>
    <span class="n">numeric_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">all_cols</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">categorical_cols</span><span class="p">]</span>
    <span class="n">numeric_cols</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="sh">'</span><span class="s">total_ordered</span><span class="sh">'</span><span class="p">)</span> <span class="c1">#remove the final output
</span>
    <span class="c1">#now use a column transformer to do both pre processors on their separate columns
</span>    <span class="n">transformer</span> <span class="o">=</span> <span class="nc">ColumnTransformer</span><span class="p">(</span>
            <span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
                    <span class="p">(</span><span class="sh">'</span><span class="s">categories</span><span class="sh">'</span><span class="p">,</span> <span class="n">encoder</span><span class="p">,</span> <span class="n">categorical_cols</span><span class="p">),</span>
                    <span class="p">(</span><span class="sh">'</span><span class="s">numeric</span><span class="sh">'</span><span class="p">,</span> <span class="n">std_scaler</span><span class="p">,</span> <span class="n">numeric_cols</span><span class="p">)</span>
            <span class="p">],</span>
            <span class="n">remainder</span><span class="o">=</span><span class="sh">'</span><span class="s">drop</span><span class="sh">'</span><span class="p">,</span> <span class="n">verbose_feature_names_out</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1">#####################
</span>
    <span class="c1"># 2. Split
</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">df_final</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df_final</span><span class="p">.</span><span class="n">columns</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">total_ordered</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">df_final</span><span class="p">[</span><span class="sh">'</span><span class="s">total_ordered</span><span class="sh">'</span><span class="p">]</span>

    <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="nf">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1">#####################
</span>
    <span class="c1"># 3. Ensemble
</span>
    <span class="c1">#four models that might work well
</span>    <span class="n">clf1</span> <span class="o">=</span> <span class="nc">RandomForestRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">clf2</span> <span class="o">=</span> <span class="nc">GradientBoostingRegressor</span><span class="p">()</span>
    <span class="n">clf3</span> <span class="o">=</span> <span class="nc">BaggingRegressor</span><span class="p">()</span>
    <span class="n">clf4</span> <span class="o">=</span> <span class="nc">SGDRegressor</span><span class="p">()</span>

    <span class="c1">#ensemble
</span>    <span class="n">eclf</span> <span class="o">=</span> <span class="nc">VotingRegressor</span><span class="p">(</span>
        <span class="n">estimators</span><span class="o">=</span><span class="p">[(</span><span class="sh">'</span><span class="s">rf</span><span class="sh">'</span><span class="p">,</span> <span class="n">clf1</span><span class="p">),</span> <span class="p">(</span><span class="sh">'</span><span class="s">boost</span><span class="sh">'</span><span class="p">,</span> <span class="n">clf2</span><span class="p">),</span> <span class="p">(</span><span class="sh">'</span><span class="s">bag</span><span class="sh">'</span><span class="p">,</span> <span class="n">clf3</span><span class="p">),</span> <span class="p">(</span><span class="sh">'</span><span class="s">sgd</span><span class="sh">'</span><span class="p">,</span><span class="n">clf4</span><span class="p">)])</span>

    <span class="c1">#find accuracies using cross validated scores
</span>    <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">([</span><span class="n">clf1</span><span class="p">,</span> <span class="n">clf2</span><span class="p">,</span> <span class="n">clf3</span><span class="p">,</span> <span class="n">clf4</span><span class="p">,</span> <span class="n">eclf</span><span class="p">],</span> <span class="p">[</span><span class="sh">'</span><span class="s">Random Forest</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Gradient Boost</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Bagging</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">SGD</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Ensemble</span><span class="sh">'</span><span class="p">]):</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="nf">cross_val_score</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">X_train_trans</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="sh">'</span><span class="s">neg_mean_squared_error</span><span class="sh">'</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> 
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">MSE: %0.2f (+/- %0.2f) [%s]</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">scores</span><span class="p">.</span><span class="nf">mean</span><span class="p">(),</span> <span class="n">scores</span><span class="p">.</span><span class="nf">std</span><span class="p">(),</span> <span class="n">label</span><span class="p">))</span> <span class="c1">#gradient boost was the best
</span>
    <span class="c1">##################### 
</span>
    <span class="c1"># 4. Hyperparameterize
</span>
    <span class="c1">#pipeline
</span>    <span class="n">pipeline</span> <span class="o">=</span> <span class="nc">Pipeline</span><span class="p">([(</span><span class="sh">'</span><span class="s">transformer</span><span class="sh">'</span><span class="p">,</span> <span class="n">transformer</span><span class="p">),</span>
                     <span class="p">(</span><span class="sh">'</span><span class="s">GradBoost</span><span class="sh">'</span><span class="p">,</span> <span class="nc">GradientBoostingRegressor</span><span class="p">())])</span>

    <span class="c1">#find names of parameters
</span>    <span class="n">pipeline</span><span class="p">.</span><span class="nf">get_params</span><span class="p">()</span>

    <span class="c1">#don't need to hyperparameterize the transformer
</span>    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">GradBoost__learning_rate</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
        <span class="sh">'</span><span class="s">GradBoost__n_estimators</span><span class="sh">'</span><span class="p">:</span> <span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">GradBoost__max_depth</span><span class="sh">'</span><span class="p">:</span> <span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">GradBoost__min_impurity_decrease</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="n">n_iter_search</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="n">random_search</span> <span class="o">=</span> <span class="nc">RandomizedSearchCV</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter_search</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1">#find best score
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">random_search</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
        <span class="c1"># Find the best score
</span>        <span class="n">best_score</span> <span class="o">=</span> <span class="n">random_search</span><span class="p">.</span><span class="n">best_score_</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Best score: %0.2f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">best_score</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1">#Best negative MSE = 0.47- very good! (since y_train values range from 0 to 1400, see: y_train_counts = y_train.value_counts())
</span>
    <span class="c1">#####################
</span>
    <span class="c1"># 5. Cross validate
</span>    <span class="n">scores</span> <span class="o">=</span> <span class="nf">cross_val_score</span><span class="p">(</span><span class="n">random_search</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">scores</span><span class="p">.</span><span class="nf">mean</span><span class="p">(),</span> <span class="sh">'</span><span class="se">\t</span><span class="sh">'</span><span class="p">,</span> <span class="n">scores</span><span class="p">.</span><span class="nf">std</span><span class="p">())</span>
    <span class="c1"># 0.3921064495878645 	 0.08086083233321788 - really happy with this
</span>
    <span class="c1">#find parameters used
</span>    <span class="n">random_search</span><span class="p">.</span><span class="n">best_estimator_</span>
    <span class="c1">#learning rate = 0.01, max_depth = 2, n_estimators = 246
</span>
    <span class="c1">#####################
</span>
    <span class="c1"># 6. Test 
</span>
    <span class="c1">#set up pipeline with above parameters
</span>    <span class="n">pipeline_test</span> <span class="o">=</span> <span class="nc">Pipeline</span><span class="p">([(</span><span class="sh">'</span><span class="s">transformer</span><span class="sh">'</span><span class="p">,</span> <span class="n">transformer</span><span class="p">),</span>
                        <span class="p">(</span><span class="sh">'</span><span class="s">GradBoost</span><span class="sh">'</span><span class="p">,</span> <span class="nc">GradientBoostingRegressor</span><span class="p">(</span><span class="n">learning_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_estimators</span><span class="o">=</span><span class="mi">246</span><span class="p">))])</span>

    <span class="c1">#fit and predict
</span>    <span class="n">pipeline_test</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">pipeline_test</span><span class="p">.</span><span class="nf">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

    <span class="c1">#find neg mse
</span>    <span class="n">mse</span> <span class="o">=</span> <span class="nf">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="n">neg_mse</span> <span class="o">=</span> <span class="o">-</span><span class="n">mse</span>

    <span class="c1">#####################
</span>
    <span class="c1"># 7. Predict
</span>
    <span class="c1"># Use the trained model to make predictions
</span>    <span class="n">y_pred_current</span> <span class="o">=</span> <span class="n">pipeline_test</span><span class="p">.</span><span class="nf">predict</span><span class="p">(</span><span class="n">current_final</span><span class="p">)</span>

    <span class="c1"># Convert predictions to a DataFrame if needed
</span>    <span class="n">predictions_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">y_pred_current</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Predicted_total_ordered</span><span class="sh">'</span><span class="p">])</span>

    <span class="c1">#match NDC and name to index
</span>    <span class="n">pred_counts</span> <span class="o">=</span> <span class="n">predictions_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Predicted_total_ordered</span><span class="sh">'</span><span class="p">].</span><span class="nf">value_counts</span><span class="p">()</span>
    <span class="c1">#print(pred_counts)
</span>
    <span class="n">predictions_df_filter</span> <span class="o">=</span> <span class="n">predictions_df</span><span class="p">[</span><span class="n">predictions_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Predicted_total_ordered</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">predictions_df_filter</span><span class="p">)</span>

    <span class="c1"># Use the index of the filtered predictions to locate the corresponding rows in current_final
</span>    <span class="n">matching_rows</span> <span class="o">=</span> <span class="n">current_final</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">predictions_df_filter</span><span class="p">.</span><span class="n">index</span><span class="p">]</span>

    <span class="c1">#merge name with ndc
</span>    <span class="n">pred_names</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="n">matching_rows</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">NDC</span><span class="sh">"</span><span class="p">])</span>

    <span class="c1">#keep only necessary names
</span>    <span class="n">cols_to_keep6</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">Name</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">NDC</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">pred_names</span> <span class="o">=</span> <span class="n">pred_names</span><span class="p">[</span><span class="n">cols_to_keep6</span><span class="p">]</span>

    <span class="c1">#drop duplicated NDC
</span>    <span class="n">pred_names</span> <span class="o">=</span> <span class="n">pred_names</span><span class="p">.</span><span class="nf">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">NDC</span><span class="sh">'</span><span class="p">])</span>
    <span class="n">pred_names</span> <span class="o">=</span> <span class="n">pred_names</span><span class="p">.</span><span class="nf">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Name</span><span class="sh">'</span><span class="p">])</span>

    <span class="c1">#drop NDC then export to csv for RStudio
</span>    <span class="n">pred_names</span> <span class="o">=</span> <span class="n">pred_names</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">NDC</span><span class="sh">"</span><span class="p">])</span>
    <span class="n">pred_names</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="sh">"</span><span class="s">./prediction_names.csv</span><span class="sh">"</span><span class="p">)</span>

    </code></pre></figure> </div> <p>NOTE: Thank you to the <a href="https://www.universityofcalifornia.edu/sites/default/files/generic-drugs-istock.jpg" rel="external nofollow noopener" target="_blank">University of California</a> for the stock medication image used for this project.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Haleigh Schwartz. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>